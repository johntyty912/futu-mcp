version: '3.8'

services:
  futu-mcp:
    build:
      context: .
      dockerfile: Dockerfile
    image: futu-mcp:latest
    container_name: futu-mcp-server
    
    # Use host networking for easy FutuOpenD access
    # Alternative: use bridge mode with extra_hosts (see commented section below)
    network_mode: "host"
    
    # Environment variables
    environment:
      # FutuOpenD connection (use localhost with host networking)
      - FUTU_HOST=127.0.0.1
      - FUTU_PORT=11111
      
      # Trading password (optional, for real trading)
      # - FUTU_TRADE_PWD=your_password_here
      
      # Logging
      - LOG_LEVEL=INFO
    
    # Restart policy
    restart: unless-stopped
    
    # Note: stdio mode doesn't support HTTP health checks
    # The server communicates via stdin/stdout with MCP clients

# Alternative configuration using bridge networking
# Uncomment this section and comment out the service above if you prefer bridge mode
#
# services:
#   futu-mcp:
#     build:
#       context: .
#       dockerfile: Dockerfile
#     image: futu-mcp:latest
#     container_name: futu-mcp-server
#     
# Note: stdio mode is typically launched directly by MCP clients.
# Docker deployment is less common for stdio-based MCP servers.
